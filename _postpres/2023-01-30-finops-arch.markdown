---
layout: post
title: FinOps成本管理体系(未完待续)
date: 2023-01-30 19:00
tags:
  - finops
---

## 导读
本文介绍CH的FinOps成本管理体系，描绘完整轮廓，细节放到各Topic文章介绍。主要是针对IT资源成本，不包括人力、营销等成本。

CH是公司名称，下文简称我司。FinOps成本管理体系，后文简称FinOps。


## 业务场景
FinOps的业务场景就是节约IT资源成本，在公有云原生的环境下、主要表现为两个目标：

- 成本管控：以预算为目标，通过商务技术等手段、不断降低存量资源成本，同时管理好资源增量、做到预算不超
- 厂商对账：以止损为目标，对照合同、发现厂商的不合理收费，追溯并挽回损失


## 商业环境
FinOps业务场景具备相当的弹性，IT资源成本做坏了不会立刻致命，因此只有那些长期经营、效益生死攸关的公司才可能真正投入。

采用跟随战略的公司，通过模仿商业模式、快速入局，再通过做高运营效率、长跑胜出，运营效率生死攸关；文化制度上崇尚节俭，创始团队言传身教、制度设计保驾护航，节俭被体现在价值观、组织建设、目标制定等多方面。在这样的商业战略、文化制度下，IT资源做为常年Top3的支出项、格外受重视，FinOps成长得到了有效保障。

技术或商业创新型公司，主业利润率非常丰厚，相比而言IT资源成本可能无关紧要，在这样的环境下FinOps大多流于形式；但这些公司一旦进入稳态，也会开始重视经营效率，FinOps也会有的搞。


## 组织结构
FinOps组织结构，如下图。FinOps组织结构，由FinOps、ICSP(内部云平台)、研发、财务、成本委员会等角色组成，承担厂商对账(蓝色)、成本管控(橙色)职能。

![page.png](https://raw.githubusercontent.com/niean/niean.github.io/master/images/20201118/finops-zuzhi.png)

- 厂商对账(蓝色)：ICSP内部云平台，从多云厂商采购资源、交付给研发使用，ICSP会对资源二次定价、把原价和二次定价的计费结果给到FinOps；FinOps使用ICSP的原价计费、跟多云厂商对账，防止被多收费
- 成本管控(橙色)：研发提报IT资源预算、给到FinOps，FinOps将天级分摊给到ICSP、超预算则交付审批升级，FinOps将月级分摊给到财务、经由成本委员会审计预算、对研发形成更全面的管控(通常要求成本优化)
- 



## 业务模型
![page.png](https://raw.githubusercontent.com/niean/niean.github.io/master/images/20201118/zybcost-arch.png)


## 成本优化
成本优化属于运营，因事项多、价值大单拆出来讲。



----
以下是FinOps常见的运营事项。

## 预算制定
#### 预算要点
![page.png](https://raw.githubusercontent.com/niean/niean.github.io/master/images/20201118/zybcost-yusuan-tibaoyaodian.png)

#### 提报流程
![page.png](https://raw.githubusercontent.com/niean/niean.github.io/master/images/20201118/zybcost-yusuan-tibaoliucheng.png)



## 经验教训
- 运营是关键。3分技术7分运营，要想做好FinOps，公司必须有与之匹配的文化、组织、管理能力，做好平台就能FinOps的想法是万万不行的
- 目标要明确。我司FinOps以预算管控为目标，成本不超预算、即为达标；成本优化会影响预算制定、能够减少支出，但它只是手段、不是目标
- 模型要简单。如成本分摊，技术体系内部只支持一次、二次分摊，技术到业务只支持按固定比例分摊、比例季度更新；耦合服务链路的分摊模型，要么建设复杂、要么运营复杂，ROI过低
- 责任要清晰。FinOps团队提供平台及少量协同，把度量数据做准、给RD自助使用；RD是资源的主人，要为成本目标负责、要主动做优化（各吃自己的狗粮）
- 中台能营利。中台即ICSP，通过商务谈判、资源超卖等手段产生内部营利，这就是所谓的从成本中心转型为利润中心；中台营利是重要的降本手段


----
以下是文末附加内容，待整理、完善。

## 成本优化
成本优化，学名资源效能，遵循解决问题的工程范式: 发现问题 -> 分析问题 -> 抽象模型 -> 度量指标 -> 建设目标 -> 关键路径 -> 组织保障，如下图。

![page.png](https://raw.githubusercontent.com/niean/niean.github.io/master/images/20201118/zybcost-chengbenyouhua.png)

#### 成本模型
资源成本 = ∑( 单价 * 资源用量) ∝ 单价 * ( 业务量 * 单位业务资源用量 / 资源利用率 ) ∝ 单价 * 单位业务资源用量 / 资源利用率

其中，业务量由公司业态决定，是IT成本不可决策之基础，本模型不加考虑

#### 关键路径
提升资源效能的关键路径，主要有，

- 降单价：集中采购，多云议价、折扣策略；新产品（如AMD、SSD），高性价比资源（如偏远IDC、过保资源），优势产品
    - 硬件每年都有更新换代，及时Follow云厂商新品、控增量治存量很重要
- 提升资源利用率：避免浪费，容量基线管控（如双云冗余）、弹性扩缩（如ServerLess），调度策略优化，在离线混部、潮汐算力利用，程序优化
- 降单位业务资源用量：降效果（如降低拍搜识别率、降低直播码率、降低数据时效、合理外采），控预算（主要是成本委员会机制）

#### 组织保障
任何项目都需要组织保障，组织保障也是多方面的。这里主要有，

- 组织机制：统一商务采购，统一内部云平台，成本委员会，FinOps
- 加强运营：对账和财务监督（止损），常态运营、定期扫除，业务优化专项

#### 注意事项
- 找准方式，明确哪些是运维擅长的
- 数据驱动，决策要有清晰的数据模型
- 做大ROI，抓大放小
- 既要整存量、又要控增量，整存量要沉淀为运营能力、控增量要沉淀为平台能力

大部分成员会把成本优化当做政治任务，只追求做到预算达标，一些措施会被刻意保留下来、应对将来更繁重的优化目标。这种做法，对公司显然是不利的，这其中既有打工人聪明的狡黠、也有老板激励手段的不到位。

