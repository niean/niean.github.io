---
layout: post
title: 云原生时代的运维转型
date: 2022-01-27 20:00
tags:
  - theory
---

## 要点概述
- 传统运维职责：将工业制成品组装成服务、交付给用户，并维持服务运转；特点是强依附于业务
- 云原生时代，公有云大量使用、DevOps真实达成，传统运维的职责不断被外包、转移、替代，出现了领域危机
- 运维转型，核心是提升角色认知。运维人，要把自己从依附的运营角色、调整为独立的运维服务提供方，运维即服务OPaS
- 当前已经有一些转型实践，比如CloudOps借助洋葱模型转型为云服务提供商，SRE全力拓展超服务视角
- 对于运维来说，平台是服务能力最有力的承接方式，但平台不是唯一方式。组织、规范、流程、平台，一样都不能少


## 传统运维
传统运维的职责，是：通过一系列的流程、技术、方法，将工业制成品组装为服务，并维护其正常运转。工业制成品，包括硬件基础设施IaaS、软件基础设施PaaS、业务应用服务SaaS等。维护服务正常运转、持续运营CO是运维的主要工作，要求达成稳定、成本、安全、效率的多维目标（多快好省）。

![page.png](https://raw.githubusercontent.com/niean/niean.github.io/master/images/20200125/op-model.png)

从某种程度上讲，运维需要依附于业务、才能产生价值。在很多公司，是否理解业务是运维工作者的主要考核项之一。


## 转型背景
当下，公有云使用率越来越高，云原生和DevOps也迅速普及，传统运维的生存空间被不断压缩。主要表现在：

- 企业使用公有云后，IaaS/PaaS甚至SaaS基本都服务化了，通过API即可获取；大量的硬件、系统、网络、数据库、大数据等运维建设工作由厂商替代原厂完成了，原厂只需要保留少量的专业选型和集成能力（外包）
- 云原生技术普及后，DevOps大范围达成，之前只能由专业运维人员完成的交付、变更、监控、容量等管理操作，都可以交给业务研发自助完成了，运维职责被大量转移到业务研发（转移）
- 公有云的专业聚集效应、云原生的开源标准体系，提供了持续向好的工具化前景。工具化提升效率后，同一岗位需要的人工变少；工具进化到自动化、智能化后，机器就可以替代人工；工具化沉淀专业能力，对操作人员的技术门槛越来越低。平台对人工的替代，还在逐步深化

基础设施外包给公有云，职责不断向业务研发转移，以及专业性逐渐被平台替代。面对这样的趋势和事实，固守运营本职只会是死路一条，运维从业者需要转型。


## 转型思路
长期看，研发体系基本分为两个角色：一个是为业务场景服务的业务研发，另一个则是为业务研发服务的内部平台研发。除却规范制定、流程建设等标准化职责外，运维需要向着平台研发的方向转型。转型后的运维，属于内部平台研发、价值是提供运维服务平台。

运维转型，首先要提升角色认知。把自己从依附于业务才能产生价值的运营角色，调整为具有独立价值的运维服务提供方。这是转型最关键的部分

转型实施，遵循四步走原则: 提炼服务 --> 提供服务 --> 建设平台 --> 持续深入。其中，根据对运维价值的理解、提炼出服务，是难点，也是方向性的关键点。对于服务实体比较明确的运维角色，提炼服务相对简单。如，CloudOps是云服务、DBA是数据库、MiddlewareOps是中间件、BigdateOps是大数据。业务运维、安全运维等，服务实体较难抽象

运维转型，最终目标是达成"运维即服务OPaS"的状态。这里的运维，是运维领域众多子方向的统称，可以具体化到各个方向

![pict](https://raw.githubusercontent.com/niean/niean.github.io/master/images/20220127/OPaS-method.png)


## 转型实践
#### 组件运维的洋葱模型
对于云服务、中间件、数据库、大数据等服务实体很明确的运维角色，提炼服务很容易。其转型实施时可以按照上述洋葱模型: 

- 首先立足于运营优势，把提供服务的能力做好，建立一个价值底线；
- 然后抽出精力来建设管理平台，逐渐实现ToC化，提高效率；
- 最后，深入到组件自身专业领域，从代码、架构、运维、性能等方方面面提升专业性，建立专业壁垒。

![pict](https://raw.githubusercontent.com/niean/niean.github.io/master/images/20220127/sa-yangcong.png)

比如，作业帮的云服务运维CloudOps团队，

- 它的服务实体就是各种云服务，分布在腾讯、阿里、百度等几家云厂商
- 按照洋葱模型，经过两年多的发展，当前作业帮已经建成了多云管理平台(第二层)，对内提供了机器、CDN、带宽、对象存储等云服务的全生命周期管理能力。CloudOps成功转型、成为公司内部的二级云服务提供商
- 接下来，我们还会不断加深对公有云产品的学习、认知，加强专业深度(第三层)


#### 业务运维的超服务视角
当前，云原生DevOps的领域拼图并不完整，在「服务/应用」视角之外存在大量的能力空白，特别是向上的业务视角、部门视角、公司视角等，姑且称为**超服务视角**。

对于超服务视角，应用开发人员通常没有能力、没有动力主R；部门主管或架构师可以照顾到本部门，但受限于岗位职责、很难扩展到全局。超服务视角是传统业务运维的老战场，具备无与伦比的体验、理解和认知优势。

这样，业务运维工作者**主导超服务视角建设、提供运维即服务OPaS** 的能力，既能发挥传统运维的经验优势、借势转型，又能添补云原生工具领域的空白，会是一个双赢的选择。如下图。

![pict](https://raw.githubusercontent.com/niean/niean.github.io/master/images/20220127/OPaS.png)

超服务视角的需求场景，包括但不限于：

- 排障止损，跨应用跨部门甚至是公司全局范围的问题排查、故障止损
- 成本管控，公司全局角度的资源利用和成本控制（这个方向可能会独立为FinOps）
- 质量度量，公司全局角度的部署架构度量、流量分布度量、容量度量、服务标准化度量、北极星指标等，事关稳定性
- 规范制定，公司全局角度的运维规范制定、流程落地监督，避免小团队烟囱式建设


#### 管理面通过工单安全ToC
无论是公有云，还是内部的K8S平台，都存在着大量的运维管理操作。这类ToM的操作平台，往往缺少必要约束、只能对资深人士开放。为了优化分工、提升组织效率，可以通过工单的方式，将运维管理面安全ToC。

工单本身的设计，大量融入了运维变更管理的最佳实践，目前也是运维能力建设的一个子方向。


## 注意事项
- 转型和保守要折中。传统运维转型到服务提供方，既不会一蹴而就，也不会全员迁徙、总有人要留下来殿后。因为资源更集中，殿后人员会获得更多的横向价值
- 平台是服务能力最有力的承接方式，但绝对不是唯一方式。组织、规范、流程、平台，一样都不能少



---

---

---

## 运维演进
云原生架构逐渐成为行业趋势，运维职责被逐渐转移、替代，边界进一步收缩（未被彻底干掉）。主要表现为：

- 系统运维：硬件基础设施的运维工作转移到了公有云厂商，IaaS真实达成；留给系统运维的工作主要是面向云API的"云资产生命周期管理"，如多云管理、元数据运营等
    - 公有云资产是逻辑资产，其运维特质跟中间件类似，要求深度和精度、要求场景闭环，是不折不扣的专家岗
    - 目前有不少创业公司在做云资产管理，主要集中在编排、运营等方向，尚未形成通用能力
- 应用运维：软件基础设施的运维职责被云原生体系替代。以K8S为代表的PaaS体系已然成熟，公有云厂商已将其定义成新的交互界面；软基础设施工程师角色应运而生，承担了"打通PaaS和我方应用"的建设任务。应用运维工作继续向应用层收缩，更加专注于应用生命周期的运营
    - 应用服务通常数量庞大、在运维视角有广泛的复用性，因此，应用运维更容易在运维子领域建立专业性、然后横向输出解决方案，成为运维架构岗
- 平台体系：公有云场景下的系统运维、云原生架构下的应用运维，因其所负责运维服务的属性（如复用性）、数量等差异，导致了专家岗、架构岗的明显分化。对应的，在运维平台建设方向，也同时存在了场景闭环、横向建设两种思路，这也是由所服务对象的属性差异所致

这里，引用[腾讯刘天斯](https://mp.weixin.qq.com/s/_wwlN7GeF6VkmrK3q5__tw)的一个例子，来形象的描述运维职责的变化：

```
云计算时代的运维就好比组装汽车，客户根据自己的需要，通过PaaS能力，选择匹配的引擎、车轮、离合器等进行拼装，  
客户不用再关心汽车元部件的实现原理。
但，光有汽车是玩不转的，还需要有修路、建加油站、控制交通，运维就是要承担这个角色。
```
