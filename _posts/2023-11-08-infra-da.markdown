---
layout: post
title: 基础设施之数据分析
date: 2023-11-08 21:00
tags:
  - da
---

## 导读
本文主要介绍基础设施领域的数据分析体系。


## 数据仓库



## 数据模型
- 版本管理：应用层相关的数据必须带版本，即使是被应用层间接引用的事实表；参与数据生成的维表可以不带版本，但后果是无法精确重算，可以折中选用拉链表


## 数据质量
- 即时反馈：要想保证数据质量，则必须将之置于强依赖链路，做到即时反馈、强制修复。如资源运营的成本归属、服务调用的名字配置、业务分析的日活指标、商业分析的核心报表
- 广泛使用：被使用的场景越多，数据质量就越有保障。这是反馈机制的延续
- 交叉互验：不同链路生成的同维数据，彼此可以交叉互验。如组织关系和服务调用推导出的模块归属、云厂商计费和三方独立计费得到月度账单。相比人工反馈，交叉互验更有可能自动化、也就更具性价比


## 一些思考
- 生理特征：人脑对绝对值不敏感，好的数据分析产品呈现的一定不是绝对值。好的呈现方式，有环比、对比等
    - 环比：人脑容易捕捉数字的变化趋势，如环比增幅。环比依赖正确的起始值
    - 对比：对比能提供归一化的分析体验，更易于大脑理解，如单位成本。对比依赖基线建模


----
----
以下为思考过程，内容待整理。

### 概念
- 指数：指标，如IQ值、上证指数

### 洞见
- 主观性：数据是客观的，但是解读数据的人是主观的。数据这门科学就像中西医混合的一门医学，既要有西医的理论、分析模型以及实验，又需要有中医的望闻问切这些个人经验
- 大小数据：大数据，数据量大但信息少，需要数据挖掘找价值；小数据，数据量小但信息多，需要详细分析利用好
    - 大数据主要针对个人数据，数据量大、但信息量很小，需要用数据挖掘算法、在浩如烟海的数据里找到珍珠
    - 小数据往往由企业经营行为产生，数据量小、但数据价值很大，需要了解业务规律、才能理解数据背后蕴含的知识

### 基础知识
- 算数平均：分组统计、整体分析的结论可能大相径庭，这种现象称为辛普森悖论。悖论的原因是统计模型未考虑到某个关键变量，典型如算数平均。整体平均只有在正态分布或均匀分布下才有意义
- 大数定律：当随机事件发生的次数足够多时，发生的频率会趋近于预期的概率，典型如抛硬币。赌场就是用大数定律赚钱，如将中奖比例设置为49%
- 赌徒谬误：赌徒错误的认为，过去发生的结果、可以影响未来的结果，典型如开车时的红绿灯。实际上，每个独立的事件都是相互独立的，不会相互影响
- 墨菲定律：多次重复后，小概率事件必然发生。1-(1-P)^N，随着N的增加，发生概率无限趋近于1
- 随机对照：研究者将参与者随机分配到两个或多个组中，其中一个组接受干预、其他组接受安慰剂作为对照组，这就是随机对照双盲实验。典型如A/B测试
- 幸存者偏差：只关注幸存或成功的事物，而忽视未能幸存或失败的事物，从而导致错误的推断和判断。典型如二战时期飞机修复研究
- 二八法则：又名帕累托法则，是一种幂律分布，典型如互联网领域的赢者通吃、20%的人占有80%的财富
- 马太效应：优势的人或事物会因为其优势而不断受益、并获得更多的资源，而劣势的人或事物则相反、变的更困难。马太效应得名于《圣经》中的一句话："凡有的，还要加给他，叫他有余；没有的，连他所有的，也要夺过来"(马太福音25:29)
- 分布曲线：正太分布，又名高斯分布；拉普拉斯分布，又名双指数分布f(x,μ,b)=(1/2b)*exp(-|x-μ|/b)，呈现聚集效应、如房价；泊松分布
- ![pict](https://raw.githubusercontent.com/niean/niean.github.io/master/images/20231108/laplace.jpg)

### 数据算法
- 精确率：Precision 精确率(准 1-误报) = TP/(TP+FP)，其中TP True Postive(指马为马)、FP False Postive(指鹿为马)
- 召回率：Recall 召回率(全 1-漏报) = TP/(TP+FN)，其中FN False Negative(指马为鹿)
- 置信区间：Confidence Interval 置信度、置信区间

### 工具
- 直方图：展示数据的分布。柱子之间是连接的
- 柱状图：比较数据的大小。柱子之间有间隔

### 临时
- 常见错误：数据分析的常见局限，包括因果倒置、误把相关当因果、遗漏X变量、以偏概全、操作结果、观察时间不够等

